<html>
<head>
<title>FreeMarker templates</title>
<link rel="stylesheet" href="fixture.css"/>
</head>
<body>
<h1>FreeMarker templates</h1>

<p>Tests a simple ebook with FreeMarker templates.</p>

<table>
	<caption>Create ebook</caption>
	<tr class="head">
		<td colspan="2">fit.Text2Epub</td>
	</tr>
	<tr class="head">
		<td>folder</td>
		<td>filename</td>
	</tr>
	<tr>
		<td>freemarker</td>
		<td>FreeMarker.epub</td>
	</tr>
</table>

<table>
	<caption>check structure of ebook</caption>
	<tr class="head">
		<td>fit.ZipFileListing</td>
		<td colspan="3">FreeMarker.epub</td>
	</tr>
	<tr class="head">
		<td>getName()</td>
		<td>getSize()</td>
		<td>getMethod()</td>
		<td></td>
	</tr>
	<tr><td>mimetype              </td><td>20</td><td>0</td><td>mime type declaration</td></tr>
	<tr><td>META-INF/container.xml</td><td>  </td><td>8</td><td>container description</td></tr>
	<tr><td>content.opf           </td><td>  </td><td>8</td><td>package document</td></tr>
	<tr><td>content.ncx           </td><td>  </td><td>8</td><td>navigation document</td></tr>
	<tr><td>toc.xhtml             </td><td>  </td><td>8</td><td>table of contents</td></tr>
	<tr><td>page-map.xml          </td><td>  </td><td>8</td><td>page map</td></tr>
	<tr><td>01_chapter_one.xhtml  </td><td>  </td><td>8</td><td>chapter one</td></tr>
	<tr><td>02_chapter_two.xhtml  </td><td>  </td><td>8</td><td>chapter two</td></tr>
	<tr><td>99_footnotes.xhtml    </td><td>  </td><td>8</td><td>footnotes</td></tr>
	<tr><td>book.css              </td><td>  </td><td>8</td><td>stylesheet</td></tr>
</table>

<table>
	<caption>check mimetype</caption>
	<tr class="head">
		<td>fit.ZipEntryListing</td>
		<td>FreeMarker.epub</td>
		<td>mimetype</td>
	</tr>
	<tr class="head">
		<td>line</td>
		<td colspan="2">content</td>
	</tr>
	<tr><td class="number">1</td><td class="pre" colspan="2">application/epub+zip</td></tr>
</table>

<table>
	<caption>check container description</caption>
	<tr class="head">
		<td>fit.ZipEntryListing</td>
		<td>FreeMarker.epub</td>
		<td>META-INF/container.xml</td>
	</tr>
	<tr class="head">
		<td>line</td>
		<td colspan="2">content</td>
	</tr>
	<tr><td class="number">1</td><td class="pre" colspan="2">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</td></tr>
	<tr><td class="number">2</td><td class="pre" colspan="2">&lt;container xmlns='urn:oasis:names:tc:opendocument:xmlns:container' version='1.0'&gt;</td></tr>
	<tr><td class="number">3</td><td class="pre" colspan="2">  &lt;rootfiles&gt;</td></tr>
	<tr><td class="number">4</td><td class="pre" colspan="2">   &lt;rootfile full-path='content.opf' media-type='application/oebps-package+xml'/&gt;</td></tr>
	<tr><td class="number">5</td><td class="pre" colspan="2">  &lt;/rootfiles&gt;</td></tr>
	<tr><td class="number">6</td><td class="pre" colspan="2">&lt;/container&gt;</td></tr>
</table>

<table>
	<caption>check package document</caption>
	<tr class="head">
		<td>fit.ZipEntryListing</td>
		<td>FreeMarker.epub</td>
		<td>content.opf</td>
	</tr>
	<tr class="head">
		<td>line</td>
		<td colspan="2">content</td>
	</tr>
	<tr><td class="number"> 1</td><td class="pre" colspan="2">&lt;?xml version='1.0' encoding='UTF-8'?></td></tr>
	<tr><td class="number"> 2</td><td class="pre" colspan="2">&lt;package version='2.0'</td></tr>
	<tr><td class="number"> 3</td><td class="pre" colspan="2">    xmlns:dc='http://purl.org/dc/elements/1.1/'</td></tr>
	<tr><td class="number"> 4</td><td class="pre" colspan="2">    xmlns:opf='http://www.idpf.org/2007/opf'</td></tr>
	<tr><td class="number"> 5</td><td class="pre" colspan="2">    xmlns='http://www.idpf.org/2007/opf'</td></tr>
	<tr><td class="number"> 6</td><td class="pre" colspan="2">    unique-identifier='BookId'></td></tr>
	<tr><td class="number"> 7</td><td class="pre" colspan="2">  &lt;metadata></td></tr>
	<tr><td class="number"> 8</td><td class="pre" colspan="2">    &lt;dc:identifier id='BookId' opf:scheme='UUID'>66fb2c0f-3284-4eac-a441-ab9176862688&lt;/dc:identifier></td></tr>
	<tr><td class="number"> 9</td><td class="pre" colspan="2">    &lt;dc:language>en&lt;/dc:language></td></tr>
	<tr><td class="number">10</td><td class="pre" colspan="2">    &lt;dc:title xml:lang='en'>FreeMarker&lt;/dc:title></td></tr>
	<tr><td class="number">11</td><td class="pre" colspan="2">    &lt;dc:description xml:lang='en'>This ebook tests the evaluation of FreeMarker templates</td></tr>
	<tr><td class="number">12</td><td class="pre" colspan="2">      in content files.&lt;/dc:description></td></tr>
	<tr><td class="number">13</td><td class="pre" colspan="2">    &lt;dc:creator</td></tr>
	<tr><td class="number">14</td><td class="pre" colspan="2">        opf:file-as='Author, Arthur' opf:role='aut'</td></tr>
	<tr><td class="number">15</td><td class="pre" colspan="2">        xml:lang='en'>Arthur Author&lt;/dc:creator></td></tr>
	<tr><td class="number">16</td><td class="pre" colspan="2">    &lt;dc:subject>COMPUTERS / Documentation &amp;amp; Technical Writing&lt;/dc:subject></td></tr>
	<tr><td class="number">17</td><td class="pre" colspan="2">    &lt;dc:date opf:event='creation'>2018-01-20&lt;/dc:date></td></tr>
	<tr><td class="number">18</td><td class="pre" colspan="2">    &lt;dc:date opf:event='publication'>2018-01-19&lt;/dc:date></td></tr>
	<tr><td class="number">19</td><td class="pre" colspan="2">  &lt;/metadata></td></tr>
	<tr><td class="number">20</td><td class="pre" colspan="2">  &lt;manifest></td></tr>
	<tr><td class="number">21</td><td class="pre" colspan="2">    &lt;item id='ncx' href='content.ncx' media-type='application/x-dtbncx+xml'/></td></tr>
	<tr><td class="number">22</td><td class="pre" colspan="2">    &lt;item id='toc' href='toc.xhtml' media-type='application/xhtml+xml'/></td></tr>
	<tr><td class="number">23</td><td class="pre" colspan="2">    &lt;item id='content-02' href='01_chapter_one.xhtml' media-type='application/xhtml+xml'/></td></tr>
	<tr><td class="number">24</td><td class="pre" colspan="2">    &lt;item id='content-03' href='02_chapter_two.xhtml' media-type='application/xhtml+xml'/></td></tr>
	<tr><td class="number">25</td><td class="pre" colspan="2">    &lt;item id='content-04' href='99_footnotes.xhtml' media-type='application/xhtml+xml'/></td></tr>
	<tr><td class="number">26</td><td class="pre" colspan="2">    &lt;item id='style-sheet' href='book.css' media-type='text/css'/></td></tr>
	<tr><td class="number">27</td><td class="pre" colspan="2">    &lt;item id="map" href="page-map.xml" media-type="application/oebps-page-map+xml"/></td></tr>
	<tr><td class="number">28</td><td class="pre" colspan="2">  &lt;/manifest></td></tr>
	<tr><td class="number">29</td><td class="pre" colspan="2">  &lt;spine page-map="map" toc='ncx'></td></tr>
	<tr><td class="number">30</td><td class="pre" colspan="2">    &lt;itemref idref='toc'/></td></tr>
	<tr><td class="number">31</td><td class="pre" colspan="2">    &lt;itemref idref='content-02'/></td></tr>
	<tr><td class="number">32</td><td class="pre" colspan="2">    &lt;itemref idref='content-03'/></td></tr>
	<tr><td class="number">33</td><td class="pre" colspan="2">    &lt;itemref idref='content-04'/></td></tr>
	<tr><td class="number">34</td><td class="pre" colspan="2">  &lt;/spine></td></tr>
	<tr><td class="number">35</td><td class="pre" colspan="2">  &lt;guide></td></tr>
	<tr><td class="number">36</td><td class="pre" colspan="2">    &lt;reference type='toc' title='Inhalt' href='toc.xhtml'/></td></tr>
	<tr><td class="number">37</td><td class="pre" colspan="2">  &lt;/guide></td></tr>
	<tr><td class="number">38</td><td class="pre" colspan="2">&lt;/package></td></tr>
</table>

<table>
	<caption>check navigation document</caption>
	<tr class="head">
		<td>fit.ZipEntryListing</td>
		<td>FreeMarker.epub</td>
		<td>content.ncx</td>
	</tr>
	<tr class="head">
		<td>line</td>
		<td colspan="2">content</td>
	</tr>
	<tr><td class="number"> 1</td><td class="pre" colspan="2">&lt;?xml version='1.0' encoding='UTF-8'?></td></tr>
	<tr><td class="number"> 2</td><td class="pre" colspan="2">&lt;ncx xmlns='http://www.daisy.org/z3986/2005/ncx/' version='2005-1' xml:lang='en'></td></tr>
	<tr><td class="number"> 3</td><td class="pre" colspan="2">  &lt;head></td></tr>
	<tr><td class="number"> 4</td><td class="pre" colspan="2">    &lt;meta name='dtb:uid' content='66fb2c0f-3284-4eac-a441-ab9176862688'/></td></tr>
	<tr><td class="number"> 5</td><td class="pre" colspan="2">  &lt;/head></td></tr>
	<tr><td class="number"> 6</td><td class="pre" colspan="2">  &lt;docTitle></td></tr>
	<tr><td class="number"> 7</td><td class="pre" colspan="2">    &lt;text>FreeMarker&lt;/text></td></tr>
	<tr><td class="number"> 8</td><td class="pre" colspan="2">  &lt;/docTitle></td></tr>
	<tr><td class="number"> 9</td><td class="pre" colspan="2">  &lt;docAuthor></td></tr>
	<tr><td class="number">10</td><td class="pre" colspan="2">    &lt;text>Arthur Author&lt;/text></td></tr>
	<tr><td class="number">11</td><td class="pre" colspan="2">  &lt;/docAuthor></td></tr>
	<tr><td class="number">12</td><td class="pre" colspan="2">  &lt;navMap></td></tr>
	<tr><td class="number">13</td><td class="pre" colspan="2">    &lt;navPoint playOrder='1' id='navPoint-1'></td></tr>
	<tr><td class="number">14</td><td class="pre" colspan="2">      &lt;navLabel></td></tr>
	<tr><td class="number">15</td><td class="pre" colspan="2">        &lt;text>FreeMarker&lt;/text></td></tr>
	<tr><td class="number">16</td><td class="pre" colspan="2">      &lt;/navLabel></td></tr>
	<tr><td class="number">17</td><td class="pre" colspan="2">      &lt;content src='toc.xhtml'/></td></tr>
	<tr><td class="number">18</td><td class="pre" colspan="2">      &lt;navPoint playOrder='2' id='navPoint-2'></td></tr>
	<tr><td class="number">19</td><td class="pre" colspan="2">        &lt;navLabel></td></tr>
	<tr><td class="number">20</td><td class="pre" colspan="2">          &lt;text>Chapter One&lt;/text></td></tr>
	<tr><td class="number">21</td><td class="pre" colspan="2">        &lt;/navLabel></td></tr>
	<tr><td class="number">22</td><td class="pre" colspan="2">        &lt;content src='01_chapter_one.xhtml#h1-01'/></td></tr>
	<tr><td class="number">23</td><td class="pre" colspan="2">      &lt;/navPoint></td></tr>
	<tr><td class="number">24</td><td class="pre" colspan="2">      &lt;navPoint playOrder='3' id='navPoint-3'></td></tr>
	<tr><td class="number">25</td><td class="pre" colspan="2">        &lt;navLabel></td></tr>
	<tr><td class="number">26</td><td class="pre" colspan="2">          &lt;text>Chapter Two&lt;/text></td></tr>
	<tr><td class="number">27</td><td class="pre" colspan="2">        &lt;/navLabel></td></tr>
	<tr><td class="number">28</td><td class="pre" colspan="2">        &lt;content src='02_chapter_two.xhtml#h1-01'/></td></tr>
	<tr><td class="number">29</td><td class="pre" colspan="2">      &lt;/navPoint></td></tr>
	<tr><td class="number">30</td><td class="pre" colspan="2">      &lt;navPoint playOrder='4' id='navPoint-4'></td></tr>
	<tr><td class="number">31</td><td class="pre" colspan="2">        &lt;navLabel></td></tr>
	<tr><td class="number">32</td><td class="pre" colspan="2">          &lt;text>Footnotes&lt;/text></td></tr>
	<tr><td class="number">33</td><td class="pre" colspan="2">        &lt;/navLabel></td></tr>
	<tr><td class="number">34</td><td class="pre" colspan="2">        &lt;content src='99_footnotes.xhtml#h1-01'/></td></tr>
	<tr><td class="number">35</td><td class="pre" colspan="2">      &lt;/navPoint></td></tr>
	<tr><td class="number">36</td><td class="pre" colspan="2">    &lt;/navPoint></td></tr>
	<tr><td class="number">37</td><td class="pre" colspan="2">  &lt;/navMap></td></tr>
	<tr><td class="number">38</td><td class="pre" colspan="2">  &lt;pageList></td></tr>
	<tr><td class="number">39</td><td class="pre" colspan="2">    &lt;pageTarget id="page1" type="normal" value="1"></td></tr>
	<tr><td class="number">40</td><td class="pre" colspan="2">      &lt;navLabel>&lt;text>1&lt;/text>&lt;/navLabel></td></tr>
	<tr><td class="number">41</td><td class="pre" colspan="2">      &lt;content src="01_chapter_one.xhtml#page1"/></td></tr>
	<tr><td class="number">42</td><td class="pre" colspan="2">    &lt;/pageTarget></td></tr>
	<tr><td class="number">43</td><td class="pre" colspan="2">    &lt;pageTarget id="page2" type="normal" value="2"></td></tr>
	<tr><td class="number">44</td><td class="pre" colspan="2">      &lt;navLabel>&lt;text>2&lt;/text>&lt;/navLabel></td></tr>
	<tr><td class="number">45</td><td class="pre" colspan="2">      &lt;content src="02_chapter_two.xhtml#page2"/></td></tr>
	<tr><td class="number">46</td><td class="pre" colspan="2">    &lt;/pageTarget></td></tr>
	<tr><td class="number">47</td><td class="pre" colspan="2">    &lt;pageTarget id="page3" type="normal" value="3"></td></tr>
	<tr><td class="number">48</td><td class="pre" colspan="2">      &lt;navLabel>&lt;text>3&lt;/text>&lt;/navLabel></td></tr>
	<tr><td class="number">49</td><td class="pre" colspan="2">      &lt;content src="02_chapter_two.xhtml#page3"/></td></tr>
	<tr><td class="number">50</td><td class="pre" colspan="2">    &lt;/pageTarget></td></tr>
	<tr><td class="number">51</td><td class="pre" colspan="2">  &lt;/pageList></td></tr>
	<tr><td class="number">52</td><td class="pre" colspan="2">&lt;/ncx></td></tr>
</table>

<table>
	<caption>check chapter one</caption>
	<tr class="head">
		<td>fit.ZipEntryListing</td>
		<td>FreeMarker.epub</td>
		<td>01_chapter_one.xhtml</td>
	</tr>
	<tr class="head">
		<td>line</td>
		<td colspan="2">content</td>
	</tr>
	<tr><td class="number"> 1</td><td class="pre" colspan="2">&lt;?xml version='1.0'?></td></tr>
	<tr><td class="number"> 2</td><td class="pre" colspan="2">&lt;!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'></td></tr>
	<tr><td class="number"> 3</td><td class="pre" colspan="2">&lt;html xmlns="http://www.w3.org/1999/xhtml"></td></tr>
	<tr><td class="number"> 4</td><td class="pre" colspan="2">  &lt;head></td></tr>
	<tr><td class="number"> 5</td><td class="pre" colspan="2">    &lt;title>FreeMarker - Arthur Author&lt;/title></td></tr>
	<tr><td class="number"> 6</td><td class="pre" colspan="2">    &lt;link href="book.css" type="text/css" rel="stylesheet"/></td></tr>
	<tr><td class="number"> 7</td><td class="pre" colspan="2">  &lt;/head></td></tr>
	<tr><td class="number"> 8</td><td class="pre" colspan="2">  &lt;body></td></tr>
	<tr><td class="number"> 9</td><td class="pre" colspan="2">    &lt;h1 id="h1-01">Chapter One&lt;/h1></td></tr>
	<tr><td class="number">10</td><td class="pre" colspan="2">    &lt;p>&lt;span epub:type="pagebreak" id="page1" title="1" xmlns:epub="http://www.idpf.org/2007/ops"/>This is the first chapter of FreeMarker from Arthur Author&lt;a class="refnote" id="rn1" href="#fn1">1&lt;/a>.&lt;/p></td></tr>
	<tr><td class="number">11</td><td class="pre" colspan="2">    &lt;p>This ebook tests the evaluation of FreeMarker templates</td></tr>
	<tr><td class="number">12</td><td class="pre" colspan="2">    in content files.&lt;/p></td></tr>
	<tr><td class="number">13</td><td class="pre" colspan="2">    &lt;div style="white-space: pre;"></td></tr>
	<tr><td class="number">14</td><td class="pre" colspan="2">    &lt;/div></td></tr>
	<tr><td class="number">15</td><td class="pre" colspan="2">    &lt;div class="footnote" id="fn1">&lt;a href="#rn1">↑&lt;/a> This is the footnote&lt;/div></td></tr>
	<tr><td class="number">16</td><td class="pre" colspan="2">  &lt;/body></td></tr>
	<tr><td class="number">17</td><td class="pre" colspan="2">&lt;/html></td></tr>
</table>

<table>
	<caption>check chapter two</caption>
	<tr class="head">
		<td>fit.ZipEntryListing</td>
		<td>FreeMarker.epub</td>
		<td>02_chapter_two.xhtml</td>
	</tr>
	<tr class="head">
		<td>line</td>
		<td colspan="2">content</td>
	</tr>
	<tr><td class="number"> 1</td><td class="pre" colspan="2">&lt;?xml version='1.0'?></td></tr>
	<tr><td class="number"> 2</td><td class="pre" colspan="2">&lt;!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'></td></tr>
	<tr><td class="number"> 3</td><td class="pre" colspan="2">&lt;html xmlns="http://www.w3.org/1999/xhtml"></td></tr>
	<tr><td class="number"> 4</td><td class="pre" colspan="2">  &lt;head></td></tr>
	<tr><td class="number"> 5</td><td class="pre" colspan="2">    &lt;title>FreeMarker - Arthur Author&lt;/title></td></tr>
	<tr><td class="number"> 6</td><td class="pre" colspan="2">    &lt;link href="book.css" type="text/css" rel="stylesheet"/></td></tr>
	<tr><td class="number"> 7</td><td class="pre" colspan="2">  &lt;/head></td></tr>
	<tr><td class="number"> 8</td><td class="pre" colspan="2">  &lt;body></td></tr>
	<tr><td class="number"> 9</td><td class="pre" colspan="2">    &lt;h1 id="h1-01">Chapter Two&lt;/h1></td></tr>
	<tr><td class="number">10</td><td class="pre" colspan="2">    &lt;p>&lt;span epub:type="pagebreak" id="page2" title="2" xmlns:epub="http://www.idpf.org/2007/ops"/>This is the second chapter of FreeMarker.&lt;/p></td></tr>
	<tr><td class="number">11</td><td class="pre" colspan="2">    &lt;p>&lt;span epub:type="pagebreak" id="page3" title="3" xmlns:epub="http://www.idpf.org/2007/ops"/>Page three starts here&lt;a class="refnote" id="rn2" href="99_footnotes.xhtml#fn2">2&lt;/a>.&lt;/p></td></tr>
	<tr><td class="number">12</td><td class="pre" colspan="2">  &lt;/body></td></tr>
	<tr><td class="number">13</td><td class="pre" colspan="2">&lt;/html></td></tr>
</table>

<table>
	<caption>check footnotes</caption>
	<tr class="head">
		<td>fit.ZipEntryListing</td>
		<td>FreeMarker.epub</td>
		<td>99_footnotes.xhtml</td>
	</tr>
	<tr class="head">
		<td>line</td>
		<td colspan="2">content</td>
	</tr>
	<tr><td class="number"> 1</td><td class="pre" colspan="2">&lt;?xml version='1.0'?></td></tr>
	<tr><td class="number"> 2</td><td class="pre" colspan="2">&lt;!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.1//EN' 'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'></td></tr>
	<tr><td class="number"> 3</td><td class="pre" colspan="2">&lt;html xmlns="http://www.w3.org/1999/xhtml"></td></tr>
	<tr><td class="number"> 4</td><td class="pre" colspan="2">  &lt;head></td></tr>
	<tr><td class="number"> 5</td><td class="pre" colspan="2">    &lt;title>FreeMarker - Arthur Author&lt;/title></td></tr>
	<tr><td class="number"> 6</td><td class="pre" colspan="2">    &lt;link href="book.css" type="text/css" rel="stylesheet"/></td></tr>
	<tr><td class="number"> 7</td><td class="pre" colspan="2">  &lt;/head></td></tr>
	<tr><td class="number"> 8</td><td class="pre" colspan="2">  &lt;body></td></tr>
	<tr><td class="number"> 9</td><td class="pre" colspan="2">    &lt;h1 id="h1-01">Footnotes&lt;/h1></td></tr>
	<tr><td class="number">10</td><td class="pre" colspan="2">    &lt;p>Here are footnotes in a separate file:&lt;/p></td></tr>
	<tr><td class="number">11</td><td class="pre" colspan="2">    &lt;div class="footnote" id="fn2">&lt;a href="02_chapter_two.xhtml#rn2">↑&lt;/a> This is the footnote for chapter two.&lt;/div></td></tr>
	<tr><td class="number">12</td><td class="pre" colspan="2">  &lt;/body></td></tr>
	<tr><td class="number">13</td><td class="pre" colspan="2">&lt;/html></td></tr>
</table>

<table>
	<caption>Summary</caption>
	<tr class="head">
		<td colspan="2">fit.Summary</td>
	</tr>
</table>

</body>
</html>